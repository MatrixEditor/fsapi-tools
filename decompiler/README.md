# ECMAScript-Decompiler

![Platform](https://img.shields.io:/static/v1?label=Platforms&message=Linux&color=lightgrey)
![Platform](https://img.shields.io:/static/v1?label=Other+Platforms&message=Window|Mac+with+Docker&color=blue)

Frontier Smart products equipped with the `FS2028` (`Venice 8`) module store their directory archive differently. This archive includes compiled ECMAScript files (`es.bin`) as well as various graphic resources for the device's display.

The binary files contain XDR bytecode generated by the `SpiderMonkey` JavaScript Engine, specifically version `1.8`, which is quite outdated. The provided decompiler script can be utilized to decompile the binary files found within the directory archives.

## Usage

````sh
$ ./ecma-decompiler xdrfile.es.bin > decompiled_output.js
````

> Note: If you are note able to execute the binary on your operating system, consider trying out the docker container using the provided Dockerfile.

### Using the Dockerfile

It will create a small container with all your files. You can build it as follows:

```bash
docker build -t xdr_decompiler . --build-arg="FILES=/path/to/your/files"
```

Next, we will create a container using the image we just created, and then proceed to run the container.

```bash
docker run --rm --name xdr-decompiler -it xdr_decompiler
```

This command will open up a bash shell where you can use the `xdr` command to decompile any `es.bin` file. For instance:

```console
root@b58028c1db82:/app# xdr fscontent/Apps/FSApplication/Isu/Application.es.bin > Application.js
```

The file can be copied to the local file system using `cp`:

```bash
docker cp xdr-decompiler:/app/Application.js /path/to/destination
```

## Compile Source

In order to compile it from source, you will require the [SpiderMonkey 1.8](http://ftp.mozilla.org/pub/mozilla.org/js/js-1.8.0-rc1.tar.gz) release, which is presently accessible on the official Mozilla server. However, please note that compiling the source code on Windows can be exceptionally challenging since it necessitates the Microsoft Visual Studio 97 edition (5.0), which is difficult to obtain.

